
import piplite
await piplite.install('seaborn')
await piplite.install('pandas')
await piplite.install('matplotlib')

import pandas as pd

data = pd.read_csv('data/Salary_Data.csv')

corr_matrix = data.corr()

salary_corr = corr_matrix['Salary']

import seaborn as sns
import matplotlib.pyplot as plt

sns.heatmap(corr_matrix, annot=True, cmap='coolwarm')
plt.show()

from sklearn.linear_model import LinearRegression
from sklearn.metrics import r2_score

variables = ['YearsExperience']

for var in variables:
    X = data[[var]]
    Y = data['Salary']

model = LinearRegression().fit(X, Y)
predictions = model.predict(X)

plt.figure(figsize=(8, 6))
sns.scatterplot(data=data, x=var, y='Salary')

line = model.intercept_ + model.coef_[0] * data[var]
plt.plot(data[var], line, 'r', label=f'y={model.intercept_:.2f}+{model.coef_[0]:.2f}*x')

print(f"\nRegression equation for {var}:")
print('Salary = ', model.intercept_, '+', model.coef_[0], '*', var)
print(f"\nR-squared for {var}: {r2_score(Y, predictions)}")

plt.legend()
plt.title(f'Regression of {var} on Salary')
plt.grid(True)
plt.show()
